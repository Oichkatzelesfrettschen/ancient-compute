meta:
  version: "0.2"
  description: >-
    Babbage Analytical Engine physics/timing simulation schema.
    Material properties sourced from engineering handbooks (Shigley's 11th Ed,
    ASM Handbooks Vol.1/2, Eurocode EN 1993/10025, copper.org CDA).
    All properties valid at 10-40 C ambient unless noted.
  profile: babbage_wave2_physics
  previous_version: "0.1"

# ---------------------------------------------------------------------------
# Materials
# ---------------------------------------------------------------------------
# Each material carries 15+ fields with units, source attribution, and
# temperature range.  Ranges given as [min, max]; scalars where the
# engineering community converges on a single value.
#
# assignment key maps material -> DE2 component role.
# ---------------------------------------------------------------------------
materials:
- name: brass
  designation: CZ121 / CuZn39Pb3
  assignment: gears, figure wheels, number wheels, axes
  density_kg_m3: 8470
  friction_coeff: 0.15
  youngs_modulus_GPa: [90, 105]
  poissons_ratio: 0.30
  yield_strength_MPa: [220, 350]
  ultimate_tensile_strength_MPa: [350, 500]
  endurance_limit_MPa: [90, 120]
  thermal_expansion_coeff_per_K: 20.5e-6
  specific_heat_J_kgK: 380
  thermal_conductivity_W_mK: 120
  hardness_HB: [80, 160]
  electrical_resistivity_ohm_m: 6.2e-8
  magnetic_permeability_relative: 1.0
  creep_threshold_C: 150
  temperature_range_C: [10, 40]
  source: "AZoM Art.2822; EngineerCalculator CZ121; Shigley 11e Table A-5"

- name: steel
  designation: S275JR / EN 10025-2
  assignment: main shaft, frame, structural members
  density_kg_m3: 7850
  friction_coeff: 0.12
  youngs_modulus_GPa: [200, 210]
  poissons_ratio: 0.30
  yield_strength_MPa: [275, 275]
  ultimate_tensile_strength_MPa: [410, 560]
  endurance_limit_MPa: [160, 200]
  thermal_expansion_coeff_per_K: 11.7e-6
  specific_heat_J_kgK: 486
  thermal_conductivity_W_mK: 51.9
  hardness_HB: [120, 170]
  electrical_resistivity_ohm_m: 1.59e-7
  magnetic_permeability_relative: 100
  creep_threshold_C: 350
  temperature_range_C: [10, 40]
  source: "Eurocode EN 1993-1-1 Sec 3.2.6; EngineerCalculator S275; Shigley 11e Table A-5"

- name: cast_iron
  designation: EN-GJL-250 / GG-25
  assignment: bed plate, heavy frame castings, supports
  density_kg_m3: 7200
  friction_coeff: 0.18
  youngs_modulus_GPa: [103, 118]
  poissons_ratio: 0.26
  yield_strength_MPa: [165, 228]
  ultimate_tensile_strength_MPa: [250, 350]
  compressive_strength_MPa: 840
  endurance_limit_MPa: [60, 120]
  thermal_expansion_coeff_per_K: 11.0e-6
  specific_heat_J_kgK: 490
  thermal_conductivity_W_mK: 46
  hardness_HB: [190, 240]
  electrical_resistivity_ohm_m: 8.0e-7
  magnetic_permeability_relative: 300
  creep_threshold_C: 300
  temperature_range_C: [10, 40]
  source: "SN-CastIron EN-GJL; AZoM Art.783; Modulus Metal GJL-250; ASM Vol.1"
  notes: >-
    Grey cast iron has no distinct yield point. Values above are
    0.1% proof stress (Rp0.1) per EN 1561. Superior vibration damping
    due to graphite flake internal friction.

- name: phosphor_bronze
  designation: CuSn8 / C52100 / CW453K
  assignment: bearing bushings, wear surfaces, sliding contacts
  density_kg_m3: 8800
  friction_coeff: 0.10
  youngs_modulus_GPa: [110, 117]
  poissons_ratio: 0.34
  yield_strength_MPa: [440, 600]
  ultimate_tensile_strength_MPa: [530, 640]
  endurance_limit_MPa: [200, 280]
  thermal_expansion_coeff_per_K: 17.8e-6
  specific_heat_J_kgK: 377
  thermal_conductivity_W_mK: 62
  hardness_HB: [150, 210]
  electrical_resistivity_ohm_m: 1.33e-7
  magnetic_permeability_relative: 1.0
  creep_threshold_C: 150
  temperature_range_C: [10, 40]
  source: "copper.org C52100; Concast C52100; AZoM Art.6417; ASM Vol.2"
  notes: >-
    Properties for half-hard to hard temper (H02-H04), appropriate for
    bearing and wear applications. PB-on-steel is a favorable tribological
    pair with low galling tendency.

- name: spring_steel
  designation: C67S / EN 10132-4 / 1.1231 / ~AISI 1065
  assignment: springs, detent flexures, latch springs
  density_kg_m3: 7850
  friction_coeff: 0.14
  youngs_modulus_GPa: [200, 210]
  poissons_ratio: 0.29
  yield_strength_MPa: [600, 1200]
  ultimate_tensile_strength_MPa: [800, 1500]
  endurance_limit_MPa: [350, 450]
  thermal_expansion_coeff_per_K: 11.5e-6
  specific_heat_J_kgK: 486
  thermal_conductivity_W_mK: 49.8
  hardness_HB: [250, 420]
  electrical_resistivity_ohm_m: 2.0e-7
  magnetic_permeability_relative: 100
  creep_threshold_C: 350
  temperature_range_C: [10, 40]
  source: "Virgamet C67S; AZoM AISI 1065 Art.6575; Shigley 11e Table A-5"
  notes: >-
    Properties for quenched-and-tempered (QT) condition. Highest endurance
    limit of all materials in this set, critical for counting mechanism
    springs undergoing 10^7+ cycles.

# ---------------------------------------------------------------------------
# Mechanisms
# ---------------------------------------------------------------------------
mechanisms:
  drive:
    type: steam_piston
    valve_gear: stephenson
    stroke_m: 0.2
    rpm: 30
    pressure_bar: 6
    estimated_power_W: 500
    thermal_efficiency_pct: 8
    notes: "Rankine cycle, ~8% practical efficiency circa 1840"

  gear_train:
    stages:
    - name: primary_reduction
      ratio: 3.0
      tooth_count_driver: 20
      tooth_count_driven: 60
      module_mm: 2.5
      pressure_angle_deg: 20
      face_width_mm: 15
      material: brass
    - name: secondary_reduction
      ratio: 2.0
      tooth_count_driver: 30
      tooth_count_driven: 60
      module_mm: 2.5
      pressure_angle_deg: 20
      face_width_mm: 12
      material: brass
    total_ratio: 6.0
    total_efficiency: 0.85

  card_feed:
    feed_rate_cards_per_min: 10
    jam_rate_per_1k: 2

  bearings:
    type: plain
    count: 4
    material: phosphor_bronze
    shaft_material: steel
    bore_diameter_mm: 50
    length_mm: 60
    radial_clearance_mm: 0.05
    oil: mineral_19th_c
    loss_per_rev_j: 0.01
    pv_limit_MPa_m_s: 10.0
    notes: "Bronze bushing on steel shaft, oil-lubricated"

  main_shaft:
    diameter_mm: 50
    length_mm: 1500
    material: steel
    bearing_count: 4
    bearing_spacing_mm: 375
    estimated_mass_kg: 23.0
    moment_of_inertia_kg_m2: 0.0072
    notes: "4-support simply-supported beam, ~1.5m length"

  cam_profiles:
    column_latch:
      type: modified_trapezoidal
      rise_angle_deg: 60
      dwell_angle_deg: 120
      return_angle_deg: 60
      total_lift_mm: 5.0
      follower_mass_kg: 0.2
      spring_rate_N_mm: 50
      material: steel
    carry_trigger:
      type: modified_trapezoidal
      rise_angle_deg: 45
      dwell_angle_deg: 90
      return_angle_deg: 45
      total_lift_mm: 3.0
      follower_mass_kg: 0.15
      spring_rate_N_mm: 80
      material: steel

# ---------------------------------------------------------------------------
# Registers
# ---------------------------------------------------------------------------
registers:
  digits: 40
  base: 10
  wheels_per_digit: 1

# ---------------------------------------------------------------------------
# Opcodes
# ---------------------------------------------------------------------------
opcodes:
  NOP:
    cycles: 1
  ADD:
    cycles: 8
  SUB:
    cycles: 8
  MULT:
    cycles: 400
  DIV:
    cycles: 750
  SQRT:
    cycles: 250
  LOAD:
    cycles: 15
  STOR:
    cycles: 15
  JMP:
    cycles: 4

# ---------------------------------------------------------------------------
# Validation
# ---------------------------------------------------------------------------
validation:
  timing_source: sm-de2-techdesc
  notes: Align cycles to Engine.clock_time units

# ---------------------------------------------------------------------------
# Tolerances
# ---------------------------------------------------------------------------
tolerances:
  gear_module_mm: 2.5
  backlash_mm: 0.15
  shaft_clearance_mm: 0.05
  bearing_clearance_mm: 0.1

# ---------------------------------------------------------------------------
# Lubrication
# ---------------------------------------------------------------------------
lubrication:
  oil_type: mineral_19th_c
  viscosity_cSt_40C: 68.0
  viscosity_Pa_s_40C: 0.059
  density_kg_m3: 870
  schedule_hours: 160
  schedule_cycles_min: 500
  schedule_cycles_max: 600
  surface_finish_Ra_um: 1.6
  notes: "19th-century mineral oil, ISO VG 68 equivalent"

# ---------------------------------------------------------------------------
# Valve Gear Parameters
# ---------------------------------------------------------------------------
valve_gear_params:
  lap_mm: 3.0
  lead_mm: 1.0
  cutoff_pct: 60.0
  notes: Stephenson link parameters to map stroke and rpm to port events

# ---------------------------------------------------------------------------
# Structural Parameters
# ---------------------------------------------------------------------------
structural:
  column_supports:
    count: 8
    height_mm: 600
    cross_section_mm: [25, 25]
    material: steel
    end_condition: fixed_fixed
    effective_length_factor: 0.5
  machine_mass_kg: 500
  footprint_m: [2.0, 0.8]

# ---------------------------------------------------------------------------
# Provisional Defaults
# ---------------------------------------------------------------------------
# Parameters that are conservative estimates pending higher-fidelity
# source data. All other parameters are source-validated.
#
# Cross-validated parameters (removed from provisional, 2026-02-25):
#   gear_module_mm     - Monte Carlo tolerance validated, Lewis stress SF >= 2
#   backlash_mm        - Monte Carlo thermal expansion check passed
#   shaft_clearance_mm - Monte Carlo bearing clearance check passed
#   bearing_clearance_mm - Monte Carlo bearing clearance check passed
#
# Remaining provisional (require primary-source measurement):
provisional_defaults:
- lap_mm
- lead_mm
- cutoff_pct
